name: 'DiffCache'
author: 'Kamil Rybacki'
description: 'Finds files that have changed since last code SUCCESSFUL workflow.'
branding:
  icon: 'eye'
  color: 'green'
inputs:
  include:
    description: 'Regex to use to match the files to include.'
    required: true
  cache_secret:
    description: 'Secret containing the cache.'
    required: true
  token:
    description: 'Github token to use for the API calls.'
    required: true
  exclude:
    description: 'Regex to use to match the files to ignore.'
    required: false
outputs:
  files:
    description: 'List of changed files kept as GH Workflow output for convenience.'
runs:
  using: 'node16'
  pre: 'dist/pre/index.js'
  main: 'dist/index.js'
  post: 'dist/post/index.js'
  post-if: success()
